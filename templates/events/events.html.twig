{% extends 'base.html.twig' %}


{% block stylesheets %}

{{ parent() }}

	<!-- DataTables -->
    <link href="{{ asset('assets/plugins/datatables/dataTables.bootstrap4.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/plugins/datatables/buttons.bootstrap4.min.css') }}" rel="stylesheet" type="text/css" />
    
{% endblock %}       
        

{% block title %}<i class="mdi mdi-calendar-clock"></i> Events{% endblock %}


{% block body %}

<div class="row align-items-center">
        <div class="col">
	        <h2>Events</h2>
        </div>
        
        <div class="col-4  ">
        {% if is_granted('ROLE_EVENT_CREATE') %}
	        <div class="btn-group float-right">
	        	<a href="{{ path('app_event_create') }}" class="btn btn-purple waves-effect"><i class="fa fa-plus"></i>  Nieuw</a>
	        </div>
	    {% endif %} 
        </div>
        
	</div>
	
	
	<div class="row">
        <div class="col-12">
            <div class="card-box table-responsive">
	            
	            <table id="datatable" class="table table-bordered">
                    <thead>
                    <tr>
                        <th>Event</th>
                        <th>Datum & Tijd</th>
                        <th>Locatie</th>
                        <th>Status</th>
						<th>Categorie</th>
                    </tr>
                    </thead>


                    <tbody>
                    {% for data in data %}
						<tr>
						    <td style="padding-bottom: 0px;">
							    <a href="{{ path('app_event', {'id': data.id}) }}" class="waves-effect">{{ data.about }}
							    	
							    	<!-- Dropdown -->
							    	{% if is_granted('ROLE_EVENT_EDIT') or is_granted('ROLE_EVENT_DELETE') %}
								    <div class="dropdown pull-right">
	                                    <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
	                                        <i class="mdi mdi-dots-horizontal"></i>
	                                    </a>
	                                    
	                                    <div class="dropdown-menu dropdown-menu-right">
	                                        <!-- item-->
	                                        {% if is_granted('ROLE_EVENT_EDIT') %}
	                                        <a href="{{ path('app_event_edit', {'id': data.id}) }}" class="dropdown-item">Bewerken</a>
	                                        {% endif %}
	                                        <!-- item-->
	                                        {% if is_granted('ROLE_EVENT_DELETE') %}
	                                        <a href="{{ path('app_event_delete', {'id': data.id}) }}" class="dropdown-item">Verwijderen</a>
	                                        {% endif %}
	                                    </div>
	                                </div>
	                                {% endif %}
	                                <!-- End Dropdown -->
							    		                               
							    </a>
							    
						    </td>
						    <td>{{ data.startDate | date('d-m-Y') }}, {{ data.startTime | date('H:i') }} - {{ data.endTime | date('H:i') }}</td>
						    <td>
						    	{{ data.location.venue }}
							</td>
							<td>
								{% if data.eventStatus == 'Bevestigd'  %}    
							        <span class="badge badge-purple">Bevestigd</span>
							    {% endif %}
							    {% if data.eventStatus == 'Voorlopig'  %}    
							        <span class="badge badge-pink">Voorlopig</span>
							    {% endif %}
							    {% if data.eventStatus == 'Geannuleerd'  %}    
							        <span class="badge badge-inverse">Geannuleerd</span>
							    {% endif %}
							</td>
						    <td>
						    {% for data in data.category %}
						    	{{ data.name }}{% if not loop.last %}, {% endif %}
						    {% endfor %}
						    
						    </td>
						</tr>

					{% endfor %}
                    
                    
                    </tbody>
                </table>
            </div>
        </div>
    </div> 
    <!-- end row -->

{% endblock %}

{% block javascripts %}

	{{ parent() }}

    <!-- Required datatable js -->

    <script src="{{ asset('assets/plugins/datatables/jquery.dataTables.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/dataTables.bootstrap4.min.js') }}"></script>
    
    <!-- Buttons examples -->
    <script src="{{ asset('assets/plugins/datatables/dataTables.buttons.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/buttons.bootstrap4.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/jszip.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/pdfmake.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/vfs_fonts.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/buttons.html5.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/buttons.print.min.js') }}"></script>
    

    <!-- Key Tables -->
    <script src="{{ asset('assets/plugins/datatables/dataTables.keyTable.min.js') }}"></script>


    <script type="text/javascript">
        $(document).ready(function () {

            // Default Datatable
            $('#datatable').DataTable();

            //Buttons examples
            var table = $('#datatable-buttons').DataTable({
                lengthChange: false,
                buttons: ['copy', 'excel', 'pdf']
            });

            // Key Tables

            $('#key-table').DataTable({
                keys: true
            });

            // Responsive Datatable
            $('#responsive-datatable').DataTable();

            // Multi Selection Datatable
            $('#selection-datatable').DataTable({
                select: {
                    style: 'multi'
                }
            });

            table.buttons().container()
                .appendTo('#datatable-buttons_wrapper .col-md-6:eq(0)');
        });
    </script>
    
{% endblock %}