{% extends 'base_content_sidebar.html.twig' %}

{% block sidebar %}
	<li class="nav-item">
		<a class="nav-link" href="#personal-info"><i class="mdi mdi-account-card-details-outline"></i> {% trans %}person_nav_personal_information{% endtrans %}</a>
	</li>

	{% if data.category.id == 1 or data.alumni == true  %}
		<li class="nav-item">
			<a class="nav-link" href="#membership"><i class="mdi mdi-account-star-outline"></i> {% trans %}person_nav_membership{% endtrans %}</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#musicalInstrument"><i class="mdi mdi-bugle"></i> {% trans %}person_nav_musicalInstrument{% endtrans %}</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#education"><i class="mdi mdi-school-outline"></i> {% trans %}person_nav_education{% endtrans %}
			{%if data.education is not empty %}
				<span class="badge badge-primary float-right">{{ data.education|length }}</span>
			{% endif %}
			</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#parents"><i class="mdi mdi-account-supervisor"></i> {% trans %}person_nav_parents{% endtrans %}
			{%if data.parents is not empty %}
				<span class="badge badge-primary float-right">{{ data.parents|length }}</span>
			{% endif %}
			</a>
		</li>
	{% endif %}

	<li class="nav-item">
		<a class="nav-link" href="#owns"><i class="mdi mdi-autorenew"></i> {% trans %}product_lease_lend{% endtrans %}
		{%if data.owns is not empty %}
			<span class="badge badge-primary float-right">{{ data.owns|length }}</span>
		{% endif %}
		</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="#order"><i class="mdi mdi-cart-arrow-down"></i> {% trans %}orders{% endtrans %}
		{%if data.customer is not empty %}
			<span class="badge badge-primary float-right">{{ data.customer|length }}</span>
		{% endif %}
		</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="#memberOf"><i class="mdi mdi-bookmark-multiple-outline"></i> {% trans %}programMemberships{% endtrans %}
		{%if data.memberOf is not empty %}
			<span class="badge badge-primary float-right">{{ data.memberOf|length }}</span>
		{% endif %}
		</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="#tags"><i class="mdi mdi-tag-outline"></i> {% trans %}tags{% endtrans %}
		{%if data.memberOf is not empty %}
			<span class="badge badge-primary float-right">{{ data.memberOf|length }}</span>
		{% endif %}
		</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="#review"><i class="mdi mdi-tooltip-outline"></i> {% trans %}reviews{% endtrans %}
		{%if data.review is not empty %}
			<span class="badge badge-primary float-right">{{ data.review|length }}</span>
		{% endif %}
		</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="#statistics"><i class="mdi mdi-chart-bell-curve-cumulative"></i> {% trans %}person_nav_statistics{% endtrans %}
		{%if data.review is not empty %}
			<span class="badge badge-primary float-right">{{ data.review|length }}</span>
		{% endif %}
		</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="#history"><i class="mdi mdi-history"></i> {% trans %}person_nav_log{% endtrans %}
		{%if data.review is not empty %}
			<span class="badge badge-primary float-right">{{ data.review|length }}</span>
		{% endif %}
		</a>
	</li>
{% endblock %}

{% block body %}
	<!-- Page header -->
	<div class="d-flex justify-content-between flex-row">
		<div class="p-2">
			<h3>
				{{ data.familyName }}, {{data.givenName }} {{ data.additionalName }}

				<span class="badge badge-primary">{{ data.category.name }}</span>
				{% if data.alumni == true  %}
					<span class="badge badge-success">Oud Lid</span>
				{% endif %}
			</h3>
		</div>


		<div class="p-2">
			<div class="btn-group btn-group-sm">
				{% if is_granted('ROLE_PERSON_EDIT') %}
				<a class="btn btn-primary" href="{{ path('person') }}" role="button"><i class="mdi mdi-window-close"></i> {% trans %}close{% endtrans %}</a>
			{% endif %}

				<button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					<span class="sr-only">Toggle Dropdown</span>
				</button>
				<div class="dropdown-menu">
					{% if is_granted('ROLE_PERSON_DELETE') %}
					<a class="dropdown-item" href="{{ path('person_delete', {'id': data.id}) }}"
					   onclick="return confirm('Weet je zeker dat je {{ data.familyName }}, {{ data.givenName }} {{ data.additionalName }}wilt verwijderen?');"><i
								class="mdi mdi-delete text-danger"></i> Verwijderen</a>
					{% endif %}
				</div>



			</div>
		</div>
	</div>
	<!-- End Page header -->

	<!-- Personal info -->
	<div class="card">
		<div class="card-header" id="personal-info">
			<span class="align-middle">
				<i class="mdi mdi-account-card-details-outline"></i> {% trans %}person_nav_personal_information{% endtrans %}
			</span>
			<a class="btn btn-primary btn-sm float-right" href="{{ path('person_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
		</div>

		<div class="card-body">
			{{ include('person/person-info.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Personal info -->
	<br>

	{% if data.category.id == 1 or data.alumni == true  %}
	<!-- Membership -->
	<div class="card">
		<div class="card-header" id="membership">
			<span class="align-middle">
				<i class="mdi mdi-account-star-outline"></i> {% trans %}person_nav_membership{% endtrans %}
			</span>
			<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_membership_create', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
		</div>
		<div class="card-body">
			{{ include('person/person-membership.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Membership -->
	<br>

	<!-- Instrument -->
	<div class="card">
		<div class="card-header" id="musicalInstrument">
			<span class="align-middle">
						<i class="mdi mdi-bugle"></i> {% trans %}person_nav_musicalInstrument{% endtrans %}
			</span>
			<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_membership_create', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
		</div>
		<div class="card-body">
			{{ include('person/person-musicalInstrument.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Instrument -->
	<br>

	<!-- Education -->
	<div class="card">
		<div class="card-header" id="education">
			<span class="align-middle">
				<i class="mdi mdi-school-outline"></i> {% trans %}person_nav_education{% endtrans %}
			</span>
			<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_membership_create', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
		</div>
		<div class="card-body">
			{{ include('person/person-education.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Education -->
	<br>

	<!-- Parents -->
	<div class="card">
		<div class="card-header" id="parents">
			<span class="align-middle">
				<i class="mdi mdi-account-supervisor"></i> {% trans %}person_nav_parents{% endtrans %}
				<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_parents_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
			</span>
		</div>
		<div class="card-body">
			{{ include('person/person-parents.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Parents -->
	<br>
	{% endif %}

	<!-- Owns -->
	<div class="card">
		<div class="card-header" id="owns">
			<span class="align-middle">
				<i class="mdi mdi-autorenew"></i> {% trans %}product_lease_lend{% endtrans %}
				<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_parents_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
			</span>
		</div>
		<div class="card-body">
			{{ include('person/person-owns.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Owns -->
	<br>

	<!-- Orders -->
	<div class="card">
		<div class="card-header" id="order">
			<span class="align-middle">
				<i class="mdi mdi-cart-arrow-down"></i> {% trans %}orders{% endtrans %}
				<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_parents_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
			</span>
		</div>
		<div class="card-body">
			{{ include('person/person-order.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Orders -->
	<br>

	<!-- memberOf -->
	<div class="card">
		<div class="card-header" id="memberOf">
			<span class="align-middle">
				<i class="mdi mdi-bookmark-multiple-outline"></i> {% trans %}programMemberships{% endtrans %}
				<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_parents_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
			</span>
		</div>
		<div class="card-body">
			{{ include('person/person-memberof.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End memberOf -->
	<br>

	<!-- tags -->
	<div class="card">
		<div class="card-header" id="tags">
			<span class="align-middle">
				<i class="mdi mdi-tag-outline"></i> {% trans %}tags{% endtrans %}
				<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_parents_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-pencil"></i></a>
			</span>
		</div>

		<div class="card-body">
		</div>
	</div>
	<!-- End Tags -->
	<br>

	<!-- Review -->
	<div class="card">
		<div class="card-header" id="review">
			<span class="align-middle">
				<i class="mdi mdi-tooltip-outline"></i> {% trans %}reviews{% endtrans %}
				<a class="btn btn-primary btn-sm float-right" href="{{ path('app_person_parents_edit', {'id': data.id}) }}" role="button"><i class="mdi mdi-plus"></i></a>
			</span>
		</div>
		<div class="card-body">
			{{ include('person/person-review.html.twig', { 'data': data }) }}
		</div>
	</div>
	<!-- End Review -->
	<br>

	<!-- Statistics -->
	<div class="card">
		<div class="card-header" id="statistics">
			<span class="align-middle">
				<i class="mdi mdi-chart-bell-curve-cumulative"></i> {% trans %}person_nav_statistics{% endtrans %}
			</span>
		</div>

		<div class="card-body">
		</div>
	</div>
	<!-- End Statistics -->
	<br>

	<!-- Log -->
	<div class="card">
		<div class="card-header" id="history">
			<span class="align-middle">
				<i class="mdi mdi-history"></i> {% trans %}person_nav_log{% endtrans %}
			</span>
		</div>
		<div class="card-body">
			{{ include('person/person-logs.html.twig', { 'data': logs }) }}
		</div>
	</div>
	<!-- End Log -->

{% endblock %}

{% block javascripts %}

	{{ parent() }}
	
	<script type="text/javascript">
        $(document).ready(function () {

			//Datatable education
			var table = $('#datatable-education').DataTable({
				"lengthChange": false,
				"bFilter": false,
				"pageLength": 5,
				"columnDefs": [
					{ "orderable": false, "targets": 0 }
				],
				"order": [[ 2, "asc" ]],
				{% if app.request.getLocale() == 'nl' %}
				language: {
					url: "{{ asset('assets/plugins/datatables/nl_NL.json') }}"
				},
				{%  endif %}
			});
			// End datatable education

			//Datatable owns
            var table = $('#datatable-owns').DataTable({
                "lengthChange": false,
                "pageLength": 10,
                "columnDefs": [
				    { "orderable": false, "targets": 0 }
				  ],
                "order": [[ 1, "asc" ]],
				{% if app.request.getLocale() == 'nl' %}
				language: {
					url: "{{ asset('assets/plugins/datatables/nl_NL.json') }}"
				},
				{%  endif %}
            });
            // End datatable owns
            
            //Datatable memberOF
            var table = $('#datatable-memberOf').DataTable({
                "lengthChange": false,
                "pageLength": 10,
                "columnDefs": [
				    { "orderable": false, "targets": 0 }
				  ],
                "order": [[ 1, "asc" ]],
				{% if app.request.getLocale() == 'nl' %}
				language: {
					url: "{{ asset('assets/plugins/datatables/nl_NL.json') }}"
				},
				{%  endif %}
            });
            // End datatable memberOf

			//Datatable Rveiw
			var table = $('#datatable-review').DataTable({
				"lengthChange": false,
				"pageLength": 10,
				"columnDefs": [
					{ "orderable": false, "targets": 0 }
				],
				"order": [[ 2, "desc" ]],
				{% if app.request.getLocale() == 'nl' %}
				language: {
					url: "{{ asset('assets/plugins/datatables/nl_NL.json') }}"
				},
				{%  endif %}
			});
			// End datatable logs

            //Datatable Logs
            var table = $('#datatable-logs').DataTable({
                "lengthChange": false,
                "pageLength": 10,
                "columnDefs": [
				    { "orderable": false, "targets": 0 }
				  ],
                "order": [[ 2, "desc" ]],
				{% if app.request.getLocale() == 'nl' %}
				language: {
					url: "{{ asset('assets/plugins/datatables/nl_NL.json') }}"
				},
				{%  endif %}
            });
            // End datatable logs

        });
    </script>
    
{% endblock %}